# Science Net User Guide
>Warning: This tool is intended for academic purposes only.
MADE BY RDUAN, FOR RESEARCH ONLY

## Program Purpose
>The purpose of this tool is to extract data from experimental videos recorded by a camera. You need to record the videos beforehand. When setting up the camera, ensure that it is perpendicular to the ground and parallel to the direction of object motion. This tool can be used for observing various experiments in kinematics.

## Prerequisites:
1. Python environment with pip tool.
2. Visual Studio Code (recommended).
3. Required libraries. Run the following code in the terminal:
```shell
pip install -r requirement.txt
```
## Please make sure the following folders exist in this project:
1. ./csv_data: Stores the positions of marked points in the videos.
2. ./csv_displacement: Contains the data after displacement.
3. ./videos: Holds the video resources.
4. ./frame: Stores captured frames.
## Contents of these folders are as follows:
1. ./csv_data: Records the positions of marked points in the videos.
2. ./csv_displacement: Contains the data after displacement.
3. ./videos: Stores the video resources.
4. ./frame: Contains the captured frames.
## Please ensure that there are two .py files in the project, to be executed in the following order:
1. imgposition.py
2. data_process.py
3. requirement.txt
## Functionality of imgposition.py:

The purpose of imgposition.py is to manually mark the positions of balls in the videos located in the "videos" folder and save them as CSV files. The operation keys are as follows:

1. Press the `n` key to switch to the next frame.
2. Press `esc` to exit the video and switch to the next one. The original data will be overwritten.
3. Press the `left mouse button` to mark a point.
4. Press the `right mouse button` to capture a screenshot.
5. Before using, please ensure that the horizontal_optima is correctly set.
The CSV files generated by imgposition.py will have the same name as the imported video files.
6. If there is a need to convert the coordinates into centimeters, place a known-length reference object on the straight line of the experimental motion. The object should be parallel to the camera and perpendicular to the ground. Record a one-second video and mark the bottom of the reference object in the first frame and the top in the second frame.

## Structure of CSV_datas
| frame    | x  | y  |
|----------|----|----|
| frame_num|coord|coord|

The CSV_data file has the following structure:
- **frame**: Represents the frame number of the video.
- **x**: Represents the x-coordinate of the marked point.
- **y**: Represents the y-coordinate of the marked point.

Each row in the CSV file corresponds to a marked point in a specific frame of the video.


## Operation of data_process.py:
The data_process.py program allows you to align all the marks made by imgposition.py to the origin and convert the distance of each point from the origin into centimeters. It is especially useful for marking projectile motion.

1. Modify the height of the reference object `object_height=____(cm)`. Please note that the unit is centimeters.
2. Modify the `ratio_switch variable`. Set it to `True` to automatically convert the units to centimeters or `False` to use the coordinates from OpenCV.
3. If there are any errors in the data, an `File {} Index out of range error occurred` will be displayed in the shell.


# Science net 使用說明

>警告:本工具僅限於學術用途  
MADE BY RDUAN, FOR RESEARCH ONLY


## 程式目的
>本工具目的為在相機所錄製的實驗影片中提取數據，需事先錄製好影片，在設置相機時請確保相**機垂直於地面，並與物體運動方向平行**，可用於觀測運動學中大部分的實驗。



## 必要安裝項目:
1. python環境 (具有pip工具)
2. vscode (建議使用)
3. 必要使用函式庫，請在終端機中執行下列代碼
   ```shell
   pip install -r requirement.txt
   ```

## 請確認本專案中是否有以下的資料夾
1. ./csv_data
2. ./csv_displacement
3. ./videos


## 這些資料夾裝的東西如下
1. ./csv_data:
   影片中標記球點的位置
2. ./csv_displacement
   經過位移後的資料
3. ./videos:
   影片資源
3. ./frame
   截圖影像


## 請確認有兩.py的檔案，執行順序如下
1. imgposition.py
2. data_process.py
3. requirement.txt

## imgposition的作用如下:
imgposition可以手動將videos底下的影片的球點標示出來，並且存成csv檔，操作按鍵分成兩個
1. 按下 `n` 鍵可以切換下一幀
2. 按下`esc`可以退出影片，並切換下一個影片，原數據會被覆蓋掉
3. 按下`滑鼠左鍵`可以進行標點
4. 按下`滑鼠右鍵`可以進行截圖
5. 使用前請先確認horizontal_optima設定正確。
6. 使用imgposition轉出的csv檔案會與匯入的影片檔名相同
7. 若有將座標轉換成公分的需求,請放一個已知長度的參考物於實驗運動的直線上，且平行於相機，並且與相機垂直於地面，並錄製一個一秒鐘的影片,標點時在第一幀標記參考物的底部,第二幀為參考物的上方


## CSV_data的資料結構
|frame    |x  |y  |
|---------|----|----|
|frame_num|座標|座標|
## data_process.py 的操控方式如下:
data_process.py 這個程式可以將imgposition所做的標記全部平移到原點，以及將每個點與原點的距離轉成公分，特別適合在標記拋物線運動時使用

1. 修改參考物件的高度`object_height=____(cm)`,請注意，單位為公分。
2. 修改ratio_switch,設定True 程式會自動將單位轉成公分,False則是使用opencv中的座標。
3. 若資料中有錯誤，會在`shell`中顯示`FILE {} Index out of range error occurred.`
